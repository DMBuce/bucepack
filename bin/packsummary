#!/bin/bash

latest="$(<latest.txt)"
header='Direct Link'
(( $# > 1 )) && header='Direct Links'

echo "Download:"
echo "https://github.com/DMBuce/bucepack/releases[All Releases]"
echo ""
echo "$header:"

for pack in "$@"; do
	echo ""https://github.com/DMBuce/bucepack/releases/latest/download/$pack.zip[\`$pack.zip\`]""
done

for pack in "$@"; do
	pack="${pack%.zip}"

	output=""
	while read file; do
		if [[ $file == data/minecraft/* || $file == assets/minecraft/* ]] \
			&& [[ -f "$latest.jar/$file" ]]
		then
			output="$output"$'\n'"$file"
		fi
	done < "cache/$pack.files"
	echo
	if [[ -n "$output" ]]; then
		echo ".Minecraft files included in \`$pack.zip\`"
		echo "[%collapsible]"
		echo "===="
		echo
		echo "\`\`\`$output"
		echo "\`\`\`"
		echo
		echo "===="
	fi
done

